
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Creating a Python Module &#8212; UC Berkeley Chem 280  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=92fd9be5" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=87d77b89" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=ccbe24c1"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'day5/01-modules';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/msse_logo.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/msse_logo.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
    <p class="title logo__title">UC Berkeley MSSE - Chem 280</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../setup.html">
                        Set up
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day1.html">
                        Day 1
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day2.html">
                        Day 2
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day3.html">
                        Day 3
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day4.html">
                        Day 4
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://msse.berkeley.edu/">
                    MSSE
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://msse-chem-280-2023.github.io/git-cheat-sheet/">
                    Git Cheat Sheet
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://www.nist.gov/mml/csd/chemical-informatics-group/lennard-jones-fluid-reference-calculations-cuboid-cell">
                    NIST LJ Reference
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://mmlapps.nist.gov/srs/LJ_PURE/mc.htm">
                    NIST MC Isotherms
                  </a>
                </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/jchen0506/molssi_doc_theme" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/MolSSI_NSF" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../setup.html">
                        Set up
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day1.html">
                        Day 1
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day2.html">
                        Day 2
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day3.html">
                        Day 3
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../day4.html">
                        Day 4
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://msse.berkeley.edu/">
                    MSSE
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://msse-chem-280-2023.github.io/git-cheat-sheet/">
                    Git Cheat Sheet
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://www.nist.gov/mml/csd/chemical-informatics-group/lennard-jones-fluid-reference-calculations-cuboid-cell">
                    NIST LJ Reference
                  </a>
                </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://mmlapps.nist.gov/srs/LJ_PURE/mc.htm">
                    NIST MC Isotherms
                  </a>
                </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/jchen0506/molssi_doc_theme" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/MolSSI_NSF" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Creating a Python Module</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="creating-a-python-module">
<h1>Creating a Python Module<a class="headerlink" href="#creating-a-python-module" title="Permalink to this heading">#</a></h1>
<div class="overview admonition">
<p class="admonition-title">Overview</p>
<p>Questions:</p>
<ul class="simple">
<li><p>What is a Python module?</p></li>
</ul>
<p>Objectives:</p>
<ul class="simple">
<li><p>Put Python code into a module (.py file)</p></li>
<li><p>Import functions from our module.</p></li>
</ul>
</div>
<section id="moving-code-into-a-module">
<h2>Moving Code into a module<a class="headerlink" href="#moving-code-into-a-module" title="Permalink to this heading">#</a></h2>
<p>For the next section, we will move our code from the Jupyter notebook to a module.<br />
We will be able to import functions from that module into the Jupyter notebook to more cleanly run our simulations.</p>
<p>Create a file called <code class="docutils literal notranslate"><span class="pre">monte_carlo_yourname.py</span></code> in <code class="docutils literal notranslate"><span class="pre">day5</span></code> folder.</p>
<p>Gather all of your functions from your Jupyter notebook and paste them into the python module you created.
In a Python module, most import statements are typically at the top of the module, followed by function definitions.
When you are done, your file might look something like the following (this code is missing the random and cubic lattice configuration generators):</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="tabcode-python" for="sd-tab-item-0">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Functions for running a Monte Carlo Simulation</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">calculate_LJ</span><span class="p">(</span><span class="n">r_ij</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The LJ interaction energy between two particles.</span>
<span class="sd">    </span>
<span class="sd">    Computes the pairwise Lennard Jones interaction energy based on the separation distance in reduced units.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    r_ij : float</span>
<span class="sd">        The distance between the particles in reduced units.</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pairwise_energy : float</span>
<span class="sd">        The pairwise Lennard Jones interaction energy in reduced units.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">r6_term</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">r_ij</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="n">r12_term</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">r6_term</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    
    <span class="n">pairwise_energy</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">r12_term</span> <span class="o">-</span> <span class="n">r6_term</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">pairwise_energy</span>

<span class="k">def</span> <span class="nf">calculate_distance</span><span class="p">(</span><span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">,</span> <span class="n">box_length</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the distance between two 3D coordinates.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    coord1, coord2: list</span>
<span class="sd">        The atomic coordinates</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    distance: float</span>
<span class="sd">        The distance between the two points.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">dim_dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">coord1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">coord2</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> 
        
        <span class="k">if</span> <span class="n">box_length</span><span class="p">:</span>
            <span class="n">dim_dist</span> <span class="o">=</span> <span class="n">dim_dist</span> <span class="o">-</span> <span class="n">box_length</span> <span class="o">*</span> <span class="nb">round</span><span class="p">(</span><span class="n">dim_dist</span> <span class="o">/</span> <span class="n">box_length</span><span class="p">)</span>
        
        <span class="n">dim_dist</span> <span class="o">=</span> <span class="n">dim_dist</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">distance</span> <span class="o">+=</span> <span class="n">dim_dist</span>
    
    <span class="n">distance</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">distance</span>

<span class="k">def</span> <span class="nf">calculate_tail_correction</span><span class="p">(</span><span class="n">num_particles</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the long range tail correction</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">const1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">num_particles</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">box_length</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">const2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">cutoff</span><span class="p">)</span><span class="o">**</span><span class="mi">9</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">cutoff</span><span class="p">)</span> <span class="o">**</span><span class="mi">3</span>
    
    <span class="k">return</span> <span class="n">const1</span> <span class="o">*</span> <span class="n">const2</span>

<span class="k">def</span> <span class="nf">calculate_total_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the total Lennard Jones energy of a system of particles.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    coordinates : list</span>
<span class="sd">        Nested list containing particle coordinates.</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    total_energy : float</span>
<span class="sd">        The total pairwise Lennard Jones energy of the system of particles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">total_energy</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="n">num_atoms</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_atoms</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_atoms</span><span class="p">):</span>
            
            <span class="c1">#print(f&#39;Comparings atom number {i} with atom number {j}&#39;)</span>
            
            <span class="n">dist_ij</span> <span class="o">=</span> <span class="n">calculate_distance</span><span class="p">(</span><span class="n">coordinates</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">box_length</span><span class="o">=</span><span class="n">box_length</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">dist_ij</span> <span class="o">&lt;</span> <span class="n">cutoff</span><span class="p">:</span>
                <span class="n">interaction_energy</span> <span class="o">=</span> <span class="n">calculate_LJ</span><span class="p">(</span><span class="n">dist_ij</span><span class="p">)</span>
                <span class="n">total_energy</span> <span class="o">+=</span> <span class="n">interaction_energy</span>
            
    <span class="k">return</span> <span class="n">total_energy</span>
    
<span class="k">def</span> <span class="nf">read_xyz</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads coordinates from an xyz file.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filepath : str</span>
<span class="sd">       The path to the xyz file to be processed.</span>
<span class="sd">       </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    atomic_coordinates : list</span>
<span class="sd">        A two dimensional list containing atomic coordinates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">box_length</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">num_atoms</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    
    <span class="n">atomic_coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">atom</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">:</span>
        <span class="n">split_atoms</span> <span class="o">=</span> <span class="n">atom</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        
        <span class="n">float_coords</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1"># We split this way to get rid of the atom label.</span>
        <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="n">split_atoms</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">float_coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">coord</span><span class="p">))</span>
            
        <span class="n">atomic_coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">float_coords</span><span class="p">)</span>
        
    
    <span class="k">return</span> <span class="n">atomic_coordinates</span><span class="p">,</span> <span class="n">box_length</span>

<span class="k">def</span> <span class="nf">accept_or_reject</span><span class="p">(</span><span class="n">delta_e</span><span class="p">,</span> <span class="n">beta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Accept or reject based on change in energy and temperature.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">delta_e</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">accept</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">random_number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="n">p_acc</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta</span><span class="o">*</span><span class="n">delta_e</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">random_number</span> <span class="o">&lt;</span> <span class="n">p_acc</span><span class="p">:</span>
            <span class="n">accept</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">accept</span> <span class="o">=</span> <span class="kc">False</span>
    
    <span class="k">return</span> <span class="n">accept</span>

<span class="k">def</span> <span class="nf">calculate_pair_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">i_particle</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the interaction energy of a particle with its environment (all other particles in the system)</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    coordinates : list</span>
<span class="sd">        The coordinates for all the particles in the system.</span>
<span class="sd">        </span>
<span class="sd">    i_particle : int</span>
<span class="sd">        The particle index for which to calculate the energy.</span>
<span class="sd">    </span>
<span class="sd">    box_length : float</span>
<span class="sd">        The length of the simulation box.</span>
<span class="sd">    </span>
<span class="sd">    cutoff : float</span>
<span class="sd">        The simulation cutoff. Beyond this distance, interactions are not calculated</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    e_total : float</span>
<span class="sd">        The pairwise interaction energy of the i-th particle with all other particles in the system.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">e_total</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="n">i_position</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="n">i_particle</span><span class="p">]</span>
    
    <span class="n">num_atoms</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">j_particle</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_atoms</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i_particle</span> <span class="o">!=</span> <span class="n">j_particle</span><span class="p">:</span>
            <span class="n">j_position</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="n">j_particle</span><span class="p">]</span>
            <span class="n">rij</span> <span class="o">=</span> <span class="n">calculate_distance</span><span class="p">(</span><span class="n">i_position</span><span class="p">,</span> <span class="n">j_position</span><span class="p">,</span> <span class="n">box_length</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">rij</span> <span class="o">&lt;</span> <span class="n">cutoff</span><span class="p">:</span>
                <span class="n">e_pair</span> <span class="o">=</span> <span class="n">calculate_LJ</span><span class="p">(</span><span class="n">rij</span><span class="p">)</span>
                <span class="n">e_total</span> <span class="o">+=</span> <span class="n">e_pair</span>
    
    <span class="k">return</span> <span class="n">e_total</span>

<span class="c1"># Set simulation parameters</span>
<span class="n">reduced_temperature</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">num_steps</span> <span class="o">=</span> <span class="mi">50000</span>
<span class="n">max_displacement</span> <span class="o">=</span> <span class="mf">0.1</span> 
<span class="n">cutoff</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c1"># Reporting information</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">energies</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">all_coordinates</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Calculated quantities</span>
<span class="n">beta</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">reduced_temperature</span>

<span class="c1"># Read initial coordinates</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;../data/sample_config1.txt&quot;</span>
<span class="n">coordinates</span><span class="p">,</span> <span class="n">box_length</span> <span class="o">=</span> <span class="n">read_xyz</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<span class="n">num_particles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>

<span class="c1"># Calculated based on simulation inputs</span>
<span class="n">total_energy</span> <span class="o">=</span> <span class="n">calculate_total_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>
<span class="n">total_energy</span> <span class="o">+=</span> <span class="n">calculate_tail_correction</span><span class="p">(</span><span class="n">num_particles</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>

<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_steps</span><span class="p">):</span>
    
    <span class="c1"># 1. Randomly pick one of num_particles particles</span>
    <span class="n">random_particle</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="n">num_particles</span><span class="p">)</span>
    
    <span class="c1"># 2. Calculate the interaction energy of the selected particle with the system. Store this value.</span>
    <span class="n">current_energy</span> <span class="o">=</span> <span class="n">calculate_pair_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">random_particle</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>
    
    <span class="c1"># 3. Generate a random x, y, z displacement range (-max_displacement, max_displacement) - uniform distribution</span>
    <span class="n">x_rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_displacement</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">)</span>
    <span class="n">y_rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_displacement</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">)</span>
    <span class="n">z_rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_displacement</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">)</span>
    
    <span class="c1"># 4. Modify the coordinate of selected particle by generated displacements.</span>
    <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">x_rand</span>
    <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">y_rand</span>
    <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">z_rand</span>
    
    <span class="c1"># 5. Calculate the new interaction energy of moved particle, store this value.</span>
    <span class="n">proposed_energy</span> <span class="o">=</span> <span class="n">calculate_pair_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">random_particle</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>
    
    <span class="c1"># 6. Calculate energy change and decide if we accept the move.</span>
    <span class="n">delta_energy</span> <span class="o">=</span> <span class="n">proposed_energy</span> <span class="o">-</span> <span class="n">current_energy</span>
    
    <span class="n">accept</span> <span class="o">=</span> <span class="n">accept_or_reject</span><span class="p">(</span><span class="n">delta_energy</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span>
    
    <span class="c1"># 7. If accept, keep movement. If not revert to old position.</span>
    <span class="k">if</span> <span class="n">accept</span><span class="p">:</span>
        <span class="n">total_energy</span> <span class="o">+=</span> <span class="n">delta_energy</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Move is not accepted, roll back coordinates</span>
        <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="n">x_rand</span>
        <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="n">y_rand</span>
        <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="n">z_rand</span>
    
    <span class="c1"># 8. Print the energy and store the coordinates at certain intervals</span>
    <span class="k">if</span> <span class="n">step</span> <span class="o">%</span> <span class="n">freq</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">total_energy</span><span class="o">/</span><span class="n">num_particles</span><span class="p">)</span>
        <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
        <span class="n">energies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">total_energy</span><span class="o">/</span><span class="n">num_particles</span><span class="p">)</span>
        <span class="n">all_coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note that we have moved all the imports to the top and also changed the location of our file path.
If you have moved everything without problems, you should be able to run the simulation by typing the following command from your <code class="docutils literal notranslate"><span class="pre">day5</span></code> folder.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-1" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="tabcode-shell" for="sd-tab-item-1">
SHELL</label><div class="sd-tab-content docutils">
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>monte_carlo_yourname.py
</pre></div>
</div>
</div>
</div>
<p>This seems great!
But, we want to make our simulation code importable from another file like a Jupyter notebook.
Let’s make our simulation run into a function.
For this function, we want to consider what are input simulation parameters.
In other words, if we want to run several simulations, what would we change? We will want to make these our function arguments.
We will also modify our function to return a list of generated coordinates, so we can analyze them later.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="tabcode-python" for="sd-tab-item-2">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_simulation</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">,</span> <span class="n">reduced_temperature</span><span class="p">,</span> <span class="n">num_steps</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run a Monte Carlo simulation with the specified parameters. </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Reporting information</span>
    <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">energies</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">all_coordinates</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Calculated quantities</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">reduced_temperature</span>
    <span class="n">num_particles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>

    <span class="c1"># Calculated based on simulation inputs</span>
    <span class="n">total_energy</span> <span class="o">=</span> <span class="n">calculate_total_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>
    <span class="n">total_energy</span> <span class="o">+=</span> <span class="n">calculate_tail_correction</span><span class="p">(</span><span class="n">num_particles</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>


    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_steps</span><span class="p">):</span>
        
        <span class="c1"># 1. Randomly pick one of num_particles particles</span>
        <span class="n">random_particle</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="n">num_particles</span><span class="p">)</span>
        
        <span class="c1"># 2. Calculate the interaction energy of the selected particle with the system. Store this value.</span>
        <span class="n">current_energy</span> <span class="o">=</span> <span class="n">calculate_pair_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">random_particle</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>
        
        <span class="c1"># 3. Generate a random x, y, z displacement range (-max_displacement, max_displacement) - uniform distribution</span>
        <span class="n">x_rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_displacement</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">)</span>
        <span class="n">y_rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_displacement</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">)</span>
        <span class="n">z_rand</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_displacement</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">)</span>
        
        <span class="c1"># 4. Modify the coordinate of selected particle by generated displacements.</span>
        <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">x_rand</span>
        <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">y_rand</span>
        <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">z_rand</span>
        
        <span class="c1"># 5. Calculate the new interaction energy of moved particle, store this value.</span>
        <span class="n">proposed_energy</span> <span class="o">=</span> <span class="n">calculate_pair_energy</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">random_particle</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span>
        
        <span class="c1"># 6. Calculate energy change and decide if we accept the move.</span>
        <span class="n">delta_energy</span> <span class="o">=</span> <span class="n">proposed_energy</span> <span class="o">-</span> <span class="n">current_energy</span>
        
        <span class="n">accept</span> <span class="o">=</span> <span class="n">accept_or_reject</span><span class="p">(</span><span class="n">delta_energy</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span>
        
        <span class="c1"># 7. If accept, keep movement. If not revert to old position.</span>
        <span class="k">if</span> <span class="n">accept</span><span class="p">:</span>
            <span class="n">total_energy</span> <span class="o">+=</span> <span class="n">delta_energy</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Move is not accepted, roll back coordinates</span>
            <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="n">x_rand</span>
            <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="n">y_rand</span>
            <span class="n">coordinates</span><span class="p">[</span><span class="n">random_particle</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="n">z_rand</span>
        
        <span class="c1"># 8. Print the energy and store the coordinates at certain intervals</span>
        <span class="k">if</span> <span class="n">step</span> <span class="o">%</span> <span class="n">freq</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">total_energy</span><span class="o">/</span><span class="n">num_particles</span><span class="p">)</span>
            <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
            <span class="n">energies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">total_energy</span><span class="o">/</span><span class="n">num_particles</span><span class="p">)</span>
            <span class="n">all_coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">all_coordinates</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can try this out in another Python module Jupyter notebook.</p>
<p>Create a Python module called <code class="docutils literal notranslate"><span class="pre">run_sim.py</span></code></p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="tabcode-python" for="sd-tab-item-3">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">monte_carlo_yourname</span>

<span class="c1"># Set simulation parameters</span>
<span class="n">reduced_temperature</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">num_steps</span> <span class="o">=</span> <span class="mi">50000</span>
<span class="n">max_displacement</span> <span class="o">=</span> <span class="mf">0.1</span> 
<span class="n">cutoff</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">freq</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="c1"># Read initial coordinates</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;lj_sample_configurations&#39;</span><span class="p">,</span> <span class="s1">&#39;lj_sample_config_periodic1.txt&#39;</span><span class="p">)</span>
<span class="n">coordinates</span><span class="p">,</span> <span class="n">box_length</span> <span class="o">=</span> <span class="n">mcsim</span><span class="o">.</span><span class="n">monte_carlo</span><span class="o">.</span><span class="n">read_xyz</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

<span class="n">monte_carlo_yourname</span><span class="o">.</span><span class="n">run_simulation</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">box_length</span><span class="p">,</span> <span class="n">reduced_temperature</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">,</span> <span class="n">num_steps</span><span class="p">,</span> <span class="n">max_displacement</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You can also now import your module into a Jupyter notebook.</p>
<div class="key admonition">
<p class="admonition-title">Key Points</p>
<ul class="simple">
<li><p>When working on a large project, you should organize your code into modules.</p></li>
</ul>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-code-into-a-module">Moving Code into a module</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/day5/01-modules.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  



  
  
  
  
  
  
  


<div class="row h-10">
    <div class="col-2">
        <a href="https://molssi.org/" target="_blank" title="Go to MolSSI in a new tab">
            <img src="../_static/molssi_main_logo.png" class="logo__image only-light footer_logo" alt="Logo image">
            <img src="../_static/molssi_main_logo_inverted_white.png" class="logo__image only-dark footer_logo" alt="Logo image">
        </a>
    </div>
    <div class="col-8">
        <p> &copy; Copyright 2019-2023 <a href="https://molssi.org/">The Molecular Sciences Software Institute</a></p>
        <p>Funded by the National Science Foundation 
          <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1547580">OAC-1547580</a> and 
          <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2136142">CHE-2136142.</a></p>
 
        
        <p class="sphinx-version">
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.1.2.<br>
        </p>
        

        <p class="theme-version">
        Built with a customized <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
        </p>

    </div>
    <div class="col-2">
        <a href="https://nsf.gov/" target="_blank" title="Go to the NSF in a new tab">
            <img src="../_static/nsf.png" class="footer_logo" alt="The NSF">
          </a>
    </div>
</div></div>
      
    </div>
  
  
</div>

  </footer>
  </body>
</html>